{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block page_content %}
<div class="container-fluid" id="profile-main-container">
    <div class="row profile-row-container">
        <div class="container col-sm-4 personal-container" >
            <img src="{{ image_file }}">
            <h1>{{ user.username }}</h1>
        </div>
        {% if user.username == current_user.username %}
        <div class="container-fluid personal-container">
            <h1>Twoje osiągnięcia:</h1>
            <p>Zagrałeś w {{ user_statistics.games_total_count }} gier</p>
            <p>Wygrałeś {{ (user_statistics.games_won_count/user_statistics.games_total_count) | round(2) }}% z nich</p>
            <p>Twój procent celnych strzałów to: {{ (user_statistics.shot_hit_count/user_statistics.shot_total_count) | round(2)}}%</p><br>
        </div>
        {% else %}
        <div class="container-fluid personal-container">
            <h1>Osiągnięcia gracza {{ user_statistics.username }}:</h1>
            <p>Ilość zagranych gier: {{ user_statistics.games_total_count }}</p>
            <p>Procent wygranych gier: {{ (user_statistics.games_won_count/user_statistics.games_total_count) | round(2) }}% </p>
            <p>Procent celnych strzałów: {{ (user_statistics.shot_hit_count/user_statistics.shot_total_count) | round(2)}}%</p><br>
        </div>
        {% endif %}
    </div>
    {% if user.username == current_user.username %}
    <div class="row profile-row-container">
        <div class="container col-sm-12 personal-container">
            <form method="POST" action="" enctype="multipart/form-data">
                {{ form.hidden_tag() }}
                <fieldset class="form-group">
                    <div class="form-group">
                        {{ form.old_password.label() }}
                        {{ form.old_password() }}
                    </div>
                    <div class="form-group">
                        {{ form.new_password.label() }}
                        {{ form.new_password() }}
                    </div>
                    <div class="form-group">
                        {{ form.file.label() }}
                        {{ form.file(class="form-control-file") }}
                        {% if form.file.errors %}
                            {% for error in form.file.errors %}
                                <span class="text-danger">{{ error }}</span></br>
                            {% endfor %}
                        {% endif %}
                    </div>
                </fieldset>
                 <div class="form-group">
                    {{ form.submit(class="btn btn-outline-info") }}
                </div>

            </form>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}